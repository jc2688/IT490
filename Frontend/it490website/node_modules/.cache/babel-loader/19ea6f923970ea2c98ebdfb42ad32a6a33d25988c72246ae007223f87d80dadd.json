{"ast":null,"code":"import _objectSpread from\"/home/sean/Documents/IT490/Frontend/it490website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/home/sean/Documents/IT490/Frontend/it490website/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/sean/Documents/IT490/Frontend/it490website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React from'react';import{useForm,Controller}from'react-hook-form';import{testUsers}from'../test/testlogindata';import{Link,useNavigate}from'react-router-dom';import{useUser}from'../components/StoreUser';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";var LoginForm=function LoginForm(){var _useForm=useForm({defaultValues:{username:'',password:''}}),control=_useForm.control,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var navigate=useNavigate();var _useUser=useUser(),isLoggedIn=_useUser.isLoggedIn,loginUser=_useUser.loginUser;// Use the useUser hook\nvar onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var user,response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:user=testUsers.find(function(user){return user.username===data.username;});if(!(!user||user.password!==data.password)){_context.next=4;break;}alert('Invalid username or password');return _context.abrupt(\"return\");case 4:// Call the loginUser function from useUser to set isLoggedIn to true\nloginUser(data.username);localStorage.setItem('isLoggedIn','true');localStorage.setItem('username',data.username);_context.prev=7;_context.next=10;return fetch('http://10.244.1.6:7007/login',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:data.username,password:data.password// Send the password (not hashed) to the server\n})});case 10:response=_context.sent;if(response.ok){_context.next=13;break;}throw new Error('Error sending data to server');case 13:_context.next=19;break;case 15:_context.prev=15;_context.t0=_context[\"catch\"](7);console.error('Error connecting to server:',_context.t0);alert('Cannot connect to server');case 19:navigate('/');case 20:case\"end\":return _context.stop();}},_callee,null,[[7,15]]);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var username=localStorage.getItem('username');var goToRegister=function goToRegister(){navigate('/register');};return/*#__PURE__*/_jsx(\"div\",{children:isLoggedIn?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",username,\"!\"]}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go to Home\"})]}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Username:\"}),/*#__PURE__*/_jsx(Controller,{name:\"username\",control:control,defaultValue:\"\",rules:{required:true},render:function render(_ref2){var field=_ref2.field;return/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},field),{},{type:\"text\"}));}}),errors.username&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"Username is required.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(Controller,{name:\"password\",control:control,defaultValue:\"\",rules:{required:true},render:function render(_ref3){var field=_ref3.field;return/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},field),{},{type:\"password\"}));}}),errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"Password is required.\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:goToRegister,children:\"Go to Register\"})]})});};export default LoginForm;","map":{"version":3,"names":["React","useForm","Controller","testUsers","Link","useNavigate","useUser","jsxs","_jsxs","jsx","_jsx","LoginForm","_useForm","defaultValues","username","password","control","handleSubmit","errors","formState","navigate","_useUser","isLoggedIn","loginUser","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","user","response","wrap","_callee$","_context","prev","next","find","alert","abrupt","localStorage","setItem","fetch","method","headers","body","JSON","stringify","sent","ok","Error","t0","console","error","stop","_x","apply","arguments","getItem","goToRegister","children","to","name","defaultValue","rules","required","render","_ref2","field","_objectSpread","type","className","_ref3","onClick"],"sources":["/home/sean/Documents/IT490/Frontend/it490website/src/pages/Login.js"],"sourcesContent":["import React from 'react';\nimport { useForm, Controller } from 'react-hook-form';\nimport { testUsers } from '../test/testlogindata';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useUser } from '../components/StoreUser';\n\nconst LoginForm = () => {\n  const { control, handleSubmit, formState: { errors } } = useForm({\n    defaultValues: {\n      username: '',\n      password: ''\n    }\n  });\n\n  const navigate = useNavigate();\n  const { isLoggedIn, loginUser } = useUser(); // Use the useUser hook\n\n  const onSubmit = async (data) => {\n    const user = testUsers.find(user => user.username === data.username);\n\n    if (!user || user.password !== data.password) {\n      alert('Invalid username or password');\n      return;\n    }\n\n    // Call the loginUser function from useUser to set isLoggedIn to true\n    loginUser(data.username);\n\n    localStorage.setItem('isLoggedIn', 'true');\n    localStorage.setItem('username', data.username);\n\n    try {\n      const response = await fetch('http://10.244.1.6:7007/login', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          username: data.username,\n          password: data.password, // Send the password (not hashed) to the server\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error('Error sending data to server');\n      }\n    } catch (error) {\n      console.error('Error connecting to server:', error);\n      alert('Cannot connect to server');\n    }\n\n    navigate('/');\n  };\n\n  const username = localStorage.getItem('username');\n\n  const goToRegister = () => {\n    navigate('/register');\n  };\n\n  return (\n    <div>\n      {isLoggedIn ? (\n        <div>\n          <p>Welcome, {username}!</p>\n          <Link to=\"/\">Go to Home</Link>\n        </div>\n      ) : (\n        <form onSubmit={handleSubmit(onSubmit)}>\n          <div>\n            <label>Username:</label>\n            <Controller\n              name=\"username\"\n              control={control}\n              defaultValue=\"\"\n              rules={{ required: true }}\n              render={({ field }) => <input {...field} type=\"text\" />}\n            />\n            {errors.username && (\n              <div className=\"error\">Username is required.</div>\n            )}\n          </div>\n\n          <div>\n            <label>Password:</label>\n            <Controller\n              name=\"password\"\n              control={control}\n              defaultValue=\"\"\n              rules={{ required: true }}\n              render={({ field }) => <input {...field} type=\"password\" />}\n            />\n            {errors.password && (\n              <div className=\"error\">Password is required.</div>\n            )}\n          </div>\n\n          <button type=\"submit\">Login</button>\n          <button type=\"button\" onClick={goToRegister}>Go to Register</button>\n        </form>\n      )}\n    </div>\n  );\n};\n\nexport default LoginForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}